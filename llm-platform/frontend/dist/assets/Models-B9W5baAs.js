import{k as ce,r as V,d as _e,l as p,q as d,C as v,G as e,A as t,u,a8 as a,F as S,Y as T,E as c,z as y,K as B,ak as re,m as _}from"./vue-vendor-CBcJ4V7k.js";import{u as ue}from"./index-DzVZk42n.js";import{u as pe}from"./models-BBVZaHDl.js";import{f as $,t as me,g as E,b as N,c as fe}from"./index-DcR-k5ux.js";import{R as n,o as ve,S as R,O as h}from"./element-plus-CLNn8XtP.js";import{_ as ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ge={class:"models-page"},he={class:"page-header"},ke={class:"header-actions"},Me={key:0,class:"loading"},be={key:1,class:"models-grid"},we={class:"model-header"},Ce={class:"model-info"},xe={class:"model-name"},Se={class:"model-provider"},Te={class:"model-status"},Be={class:"model-content"},ze={key:0,class:"model-description"},Ae={class:"model-specs"},De={class:"spec-item"},Ve={class:"spec-item"},$e={key:0,class:"spec-item"},Ee={class:"endpoint"},Ne={key:1,class:"model-metadata"},Re={class:"model-actions"},Ie={key:2,class:"empty-state"},Fe={key:0,class:"model-details"},Le={key:0,class:"metadata-section"},je=ce({__name:"Models",setup(Oe){const z=re(),I=ue(),m=pe(),w=V(!1),i=V(null),F=l=>{if(!l.is_active){h.warning("该模型已停用");return}m.selectModel(l),h.success(`已选择模型：${l.display_name}`)},L=l=>{m.selectModel(l),z.push("/chat")},j=l=>{m.selectModel(l),z.push("/test")},O=async()=>{await m.refreshModels(),h.success("模型列表已刷新")},P=async({action:l,model:o})=>{switch(l){case"edit":i.value=o,w.value=!0;break;case"toggle":await q(o);break;case"delete":await G(o);break}},q=async l=>{try{await R.confirm(`确定要${l.is_active?"停用":"启用"}模型 "${l.display_name}" 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),h.success(`模型已${l.is_active?"停用":"启用"}`)}catch{}},G=async l=>{try{await R.confirm(`确定要删除模型 "${l.display_name}" 吗？此操作不可恢复。`,"危险操作",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"error"}),h.success("模型已删除")}catch{}},J=l=>{const o={},C=["context_length","capabilities","specialization","languages"];for(const r of C)l[r]&&(Array.isArray(l[r])?o[r]=l[r].join(", "):o[r]=String(l[r]));return o};return _e(async()=>{await m.fetchModels()}),(l,o)=>{var A;const C=a("Refresh"),r=a("el-icon"),k=a("el-button"),K=a("el-skeleton"),M=a("el-tag"),U=a("Setting"),Y=a("TrendCharts"),H=a("Link"),Q=a("ChatDotRound"),W=a("Monitor"),X=a("More"),Z=a("Edit"),x=a("el-dropdown-item"),ee=a("Switch"),te=a("Delete"),se=a("el-dropdown-menu"),oe=a("el-dropdown"),ae=a("el-card"),ne=a("el-empty"),f=a("el-descriptions-item"),le=a("el-link"),ie=a("el-descriptions"),de=a("el-dialog");return _(),p("div",ge,[d("div",he,[o[3]||(o[3]=d("div",{class:"header-content"},[d("h1",null,"模型管理"),d("p",null,"查看和管理可用的 AI 模型")],-1)),d("div",ke,[e(k,{onClick:O,loading:u(m).loading},{default:t(()=>[e(r,null,{default:t(()=>[e(C)]),_:1}),o[2]||(o[2]=c(" 刷新 "))]),_:1,__:[2]},8,["loading"])])]),u(m).loading?(_(),p("div",Me,[e(K,{rows:6,animated:""})])):(_(),p("div",be,[(_(!0),p(S,null,T(u(m).models,s=>{var g;return _(),y(ae,{key:s.id,class:ve(["model-card",{selected:((g=u(m).selectedModel)==null?void 0:g.id)===s.id,inactive:!s.is_active}]),shadow:"hover",onClick:b=>F(s)},{header:t(()=>[d("div",we,[d("div",Ce,[d("div",xe,n(s.display_name),1),d("div",Se,n(u(E)(s.provider))+" "+n(s.provider),1)]),d("div",Te,[e(M,{type:u(N)(s.is_active?"active":"inactive"),size:"small"},{default:t(()=>[c(n(s.is_active?"活跃":"停用"),1)]),_:2},1032,["type"])])])]),footer:t(()=>[d("div",Re,[e(k,{size:"small",type:"primary",disabled:!s.is_active,onClick:B(b=>L(s),["stop"])},{default:t(()=>[e(r,null,{default:t(()=>[e(Q)]),_:1}),o[4]||(o[4]=c(" 使用模型 "))]),_:2,__:[4]},1032,["disabled","onClick"]),e(k,{size:"small",onClick:B(b=>j(s),["stop"]),disabled:!s.is_active},{default:t(()=>[e(r,null,{default:t(()=>[e(W)]),_:1}),o[5]||(o[5]=c(" 测试 "))]),_:2,__:[5]},1032,["onClick","disabled"]),u(I).isAdmin?(_(),y(oe,{key:0,onCommand:P,onClick:o[0]||(o[0]=B(()=>{},["stop"]))},{dropdown:t(()=>[e(se,null,{default:t(()=>[e(x,{command:{action:"edit",model:s}},{default:t(()=>[e(r,null,{default:t(()=>[e(Z)]),_:1}),o[6]||(o[6]=c(" 编辑 "))]),_:2,__:[6]},1032,["command"]),e(x,{command:{action:"toggle",model:s},divided:!0},{default:t(()=>[e(r,null,{default:t(()=>[e(ee)]),_:1}),c(" "+n(s.is_active?"停用":"启用"),1)]),_:2},1032,["command"]),e(x,{command:{action:"delete",model:s},class:"danger-item"},{default:t(()=>[e(r,null,{default:t(()=>[e(te)]),_:1}),o[7]||(o[7]=c(" 删除 "))]),_:2,__:[7]},1032,["command"])]),_:2},1024)]),default:t(()=>[e(k,{size:"small"},{default:t(()=>[e(r,null,{default:t(()=>[e(X)]),_:1})]),_:1})]),_:2},1024)):v("",!0)])]),default:t(()=>[d("div",Be,[s.description?(_(),p("div",ze,n(s.description),1)):v("",!0),d("div",Ae,[d("div",De,[e(r,null,{default:t(()=>[e(U)]),_:1}),d("span",null,"最大 Token: "+n(u($)(s.max_tokens)),1)]),d("div",Ve,[e(r,null,{default:t(()=>[e(Y)]),_:1}),d("span",null,"优先级: "+n(s.priority),1)]),s.endpoint_url?(_(),p("div",$e,[e(r,null,{default:t(()=>[e(H)]),_:1}),d("span",Ee,n(u(me)(s.endpoint_url,30)),1)])):v("",!0)]),s.metadata?(_(),p("div",Ne,[(_(!0),p(S,null,T(J(s.metadata),(b,D)=>(_(),y(M,{key:D,size:"small",class:"metadata-tag"},{default:t(()=>[c(n(D)+": "+n(b),1)]),_:2},1024))),128))])):v("",!0)])]),_:2},1032,["class","onClick"])}),128))])),!u(m).loading&&u(m).models.length===0?(_(),p("div",Ie,[e(ne,{description:"暂无模型数据"})])):v("",!0),e(de,{modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=s=>w.value=s),title:(A=i.value)==null?void 0:A.display_name,width:"600px"},{default:t(()=>[i.value?(_(),p("div",Fe,[e(ie,{column:2,border:""},{default:t(()=>[e(f,{label:"模型名称"},{default:t(()=>[c(n(i.value.name),1)]),_:1}),e(f,{label:"显示名称"},{default:t(()=>[c(n(i.value.display_name),1)]),_:1}),e(f,{label:"提供商"},{default:t(()=>[c(n(u(E)(i.value.provider))+" "+n(i.value.provider),1)]),_:1}),e(f,{label:"状态"},{default:t(()=>[e(M,{type:u(N)(i.value.is_active?"active":"inactive")},{default:t(()=>[c(n(i.value.is_active?"活跃":"停用"),1)]),_:1},8,["type"])]),_:1}),e(f,{label:"最大 Token"},{default:t(()=>[c(n(u($)(i.value.max_tokens)),1)]),_:1}),e(f,{label:"优先级"},{default:t(()=>[c(n(i.value.priority),1)]),_:1}),e(f,{label:"创建时间",span:2},{default:t(()=>[c(n(u(fe)(i.value.created_at)),1)]),_:1}),i.value.endpoint_url?(_(),y(f,{key:0,label:"API 端点",span:2},{default:t(()=>[e(le,{href:i.value.endpoint_url,target:"_blank"},{default:t(()=>[c(n(i.value.endpoint_url),1)]),_:1},8,["href"])]),_:1})):v("",!0),i.value.description?(_(),y(f,{key:1,label:"描述",span:2},{default:t(()=>[c(n(i.value.description),1)]),_:1})):v("",!0)]),_:1}),i.value.metadata?(_(),p("div",Le,[o[8]||(o[8]=d("h4",null,"元数据",-1)),(_(!0),p(S,null,T(i.value.metadata,(s,g)=>(_(),y(M,{key:g,class:"metadata-tag"},{default:t(()=>[c(n(g)+": "+n(typeof s=="object"?JSON.stringify(s):s),1)]),_:2},1024))),128))])):v("",!0)])):v("",!0)]),_:1},8,["modelValue","title"])])}}}),Ye=ye(je,[["__scopeId","data-v-9039ea29"]]);export{Ye as default};
