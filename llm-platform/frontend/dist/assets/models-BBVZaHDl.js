import{ag as g,r as s}from"./vue-vendor-CBcJ4V7k.js";import{e as l,b as y,c as p,d as h}from"./index-DzVZk42n.js";import{O as i}from"./element-plus-CLNn8XtP.js";const m={getModels(){return l("/models")},getActiveModels(){return l("/models/active")},getModel(o){return l(`/models/${o}`)},getModelByName(o){return l(`/models/name/${o}`)},createModel(o){return h("/admin/models",o)},updateModel(o,a){return p(`/admin/models/${o}`,a)},deleteModel(o){return y(`/admin/models/${o}`)},getAllModels(){return l("/admin/models")}},$=g("models",()=>{const o=s([]),a=s([]),r=s(!1),t=s(null),n=async()=>{try{r.value=!0;const e=await m.getModels();o.value=e}catch(e){i.error("获取模型列表失败"),console.error("Failed to fetch models:",e)}finally{r.value=!1}},c=async()=>{try{const e=await m.getActiveModels();a.value=e,!t.value&&e.length>0&&(t.value=e[0])}catch(e){i.error("获取活跃模型列表失败"),console.error("Failed to fetch active models:",e)}},u=e=>{t.value=e,localStorage.setItem("selected_model",JSON.stringify(e))},M=()=>{const e=localStorage.getItem("selected_model");if(e)try{t.value=JSON.parse(e)}catch(d){console.error("Failed to parse saved model:",d)}},v=e=>o.value.find(d=>d.name===e),f=async()=>{await Promise.all([n(),c()])};return{models:readonly(o),activeModels:readonly(a),loading:readonly(r),selectedModel:t,fetchModels:n,fetchActiveModels:c,selectModel:u,initSelectedModel:M,getModelByName:v,refreshModels:f}});export{$ as u};
